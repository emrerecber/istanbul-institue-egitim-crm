<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EÄŸitim CRM - KatÄ±lÄ±mcÄ± RaporlarÄ±</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#f8fafc; }
    .page-header { position: sticky; top: 0; background: #ffffffcc; backdrop-filter: saturate(180%) blur(6px); border-bottom: 1px solid #eef2f7; z-index: 10; }
    .card { border:1px solid #e5e7eb; box-shadow: 0 1px 2px rgba(16,24,40,.04); }
    .chart-container { height: 300px; position: relative; }
    .performance-bar { height: 20px; background: #e5e7eb; border-radius: 10px; overflow: hidden; }
    .performance-fill { height: 100%; transition: width 0.3s ease; }
    .performance-95 { background: #22c55e; }
    .performance-90 { background: #84cc16; }
    .performance-80 { background: #f59e0b; }
    .performance-70 { background: #ef4444; }
    .excellent { color: #22c55e; }
    .good { color: #84cc16; }
    .warning { color: #f59e0b; }
    .danger { color: #ef4444; }
  </style>
</head>
<body>
  <header class="page-header">
    <div class="container-fluid py-3 d-flex align-items-center justify-content-between">
      <div>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-1">
            <li class="breadcrumb-item"><a href="index.html" class="text-decoration-none">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="raporlar.html" class="text-decoration-none">Raporlar</a></li>
            <li class="breadcrumb-item active" aria-current="page">KatÄ±lÄ±mcÄ± RaporlarÄ±</li>
          </ol>
        </nav>
        <h1 class="h5 fw-semibold mb-0">KatÄ±lÄ±mcÄ± RaporlarÄ±</h1>
      </div>
    </div>
  </header>

  <main class="container-fluid py-3 py-md-4">
    <!-- Report Filters -->
    <div class="card mb-4">
      <div class="card-header">
        <h6 class="mb-0">KATILIMCI RAPOR FÄ°LTRELERÄ°</h6>
      </div>
      <div class="card-body">
        <form id="reportFilters" class="row g-3">
          <div class="col-12">
            <label class="form-label">Rapor Tipi:</label>
            <div class="d-flex gap-3 flex-wrap">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="success" id="success" checked>
                <label class="form-check-label" for="success">Ã–ÄŸrenci BaÅŸarÄ±</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="attendance" id="attendance">
                <label class="form-check-label" for="attendance">KatÄ±lÄ±m Analizi</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="exam" id="exam">
                <label class="form-check-label" for="exam">SÄ±nav BaÅŸarÄ±</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="loyalty" id="loyalty">
                <label class="form-check-label" for="loyalty">Sadakat Analizi</label>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-3">
            <label class="form-label">Tarih AralÄ±ÄŸÄ±:</label>
            <div class="row g-2">
              <div class="col-6">
                <input type="date" class="form-control" id="startDate" value="2025-09-01">
              </div>
              <div class="col-6">
                <input type="date" class="form-control" id="endDate" value="2025-09-30">
              </div>
            </div>
          </div>

          <div class="col-12 col-md-3">
            <label class="form-label">EÄŸitim:</label>
            <select class="form-select" id="educationFilter">
              <option value="">TÃ¼mÃ¼</option>
              <option value="YTÃœ EditÃ¶rlÃ¼k">YTÃœ EditÃ¶rlÃ¼k</option>
              <option value="CRM Sistemi">CRM Sistemi</option>
              <option value="Proje YÃ¶netimi">Proje YÃ¶netimi</option>
            </select>
          </div>

          <div class="col-12 col-md-3">
            <label class="form-label">Performans:</label>
            <select class="form-select" id="performanceFilter">
              <option value="">TÃ¼mÃ¼</option>
              <option value="excellent">MÃ¼kemmel (%95+)</option>
              <option value="good">Ä°yi (%80-94)</option>
              <option value="average">Orta (%70-79)</option>
              <option value="poor">DÃ¼ÅŸÃ¼k (%70-)</option>
            </select>
          </div>

          <div class="col-12 col-md-3">
            <label class="form-label">Durum:</label>
            <select class="form-select" id="statusFilter">
              <option value="">TÃ¼mÃ¼</option>
              <option value="active">Aktif</option>
              <option value="completed">TamamlandÄ±</option>
              <option value="dropped">BÄ±raktÄ±</option>
            </select>
          </div>

          <div class="col-12 d-flex gap-2">
            <button type="submit" class="btn btn-primary">ğŸ” RAPOR OLUÅTUR</button>
            <button type="button" class="btn btn-outline-secondary" id="downloadPdf">ğŸ“„ PDF Ä°ndir</button>
            <button type="button" class="btn btn-outline-success" id="downloadExcel">ğŸ“¥ Excel Ä°ndir</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Report Results -->
    <div id="reportResults">
      <!-- General Performance -->
      <div class="row g-3 mb-4">
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-primary mb-2">
                <i class="fa-solid fa-users fa-2x"></i>
              </div>
              <div class="h4 mb-0">156</div>
              <div class="text-muted">Toplam Ã–ÄŸrenci</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-info mb-2">
                <i class="fa-solid fa-percentage fa-2x"></i>
              </div>
              <div class="h4 mb-0">%89.3</div>
              <div class="text-muted">Ortalama KatÄ±lÄ±m</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-success mb-2">
                <i class="fa-solid fa-chart-line fa-2x"></i>
              </div>
              <div class="h4 mb-0">%78.5</div>
              <div class="text-muted">Ortalama SÄ±nav BaÅŸarÄ±sÄ±</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-warning mb-2">
                <i class="fa-solid fa-exclamation-triangle fa-2x"></i>
              </div>
              <div class="h4 mb-0">14</div>
              <div class="text-muted">BaÅŸarÄ±sÄ±z Ã–ÄŸrenci</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Attendance Analysis -->
      <div class="card mb-4">
        <div class="card-header">
          <h6 class="mb-0">KATILIM ANALÄ°ZÄ°</h6>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-95" style="width: 44%"></div>
                </div>
                <div class="text-nowrap">%95-100: 68 Ã¶ÄŸrenci (44%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-90" style="width: 29%"></div>
                </div>
                <div class="text-nowrap">%90-94: 45 Ã¶ÄŸrenci (29%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-80" style="width: 18%"></div>
                </div>
                <div class="text-nowrap">%80-89: 28 Ã¶ÄŸrenci (18%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-70" style="width: 8%"></div>
                </div>
                <div class="text-nowrap">%70-79: 12 Ã¶ÄŸrenci (8%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-70" style="width: 2%"></div>
                </div>
                <div class="text-nowrap">%0-69: 3 Ã¶ÄŸrenci (2%)</div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="chart-container">
                <canvas id="attendanceChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Exam Success Analysis -->
      <div class="card mb-4">
        <div class="card-header">
          <h6 class="mb-0">SINAV BAÅARI ANALÄ°ZÄ°</h6>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-95" style="width: 27%"></div>
                </div>
                <div class="text-nowrap">90-100: 42 Ã¶ÄŸrenci (27%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-90" style="width: 37%"></div>
                </div>
                <div class="text-nowrap">80-89: 58 Ã¶ÄŸrenci (37%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-80" style="width: 22%"></div>
                </div>
                <div class="text-nowrap">75-79: 35 Ã¶ÄŸrenci (22%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-70" style="width: 10%"></div>
                </div>
                <div class="text-nowrap">60-74: 15 Ã¶ÄŸrenci (10%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="performance-bar flex-grow-1 me-3">
                  <div class="performance-fill performance-70" style="width: 4%"></div>
                </div>
                <div class="text-nowrap">0-59: 6 Ã¶ÄŸrenci (4%)</div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="chart-container">
                <canvas id="examChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Top Performers -->
      <div class="card mb-4">
        <div class="card-header">
          <h6 class="mb-0">EN BAÅARILI Ã–ÄRENCÄ°LER (Top 10)</h6>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>#</th>
                  <th>Ad Soyad</th>
                  <th>KatÄ±lÄ±m</th>
                  <th>SÄ±nav</th>
                  <th>Genel</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>Ahmet YILMAZ</td>
                  <td>100%</td>
                  <td>95</td>
                  <td><span class="excellent">MÃ¼kemmel</span></td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Zeynep YILDIZ</td>
                  <td>100%</td>
                  <td>93</td>
                  <td><span class="excellent">MÃ¼kemmel</span></td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>AyÅŸe DEMÄ°R</td>
                  <td>98%</td>
                  <td>92</td>
                  <td><span class="good">Ã‡ok Ä°yi</span></td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>Mehmet KAYA</td>
                  <td>97%</td>
                  <td>90</td>
                  <td><span class="good">Ã‡ok Ä°yi</span></td>
                </tr>
                <tr>
                  <td>5</td>
                  <td>Elif Ã–ZCAN</td>
                  <td>99%</td>
                  <td>89</td>
                  <td><span class="good">Ã‡ok Ä°yi</span></td>
                </tr>
                <tr>
                  <td>6</td>
                  <td>Ali Ã–ZTÃœRK</td>
                  <td>95%</td>
                  <td>87</td>
                  <td><span class="good">Ä°yi</span></td>
                </tr>
                <tr>
                  <td>7</td>
                  <td>Fatma ÅAHIN</td>
                  <td>94%</td>
                  <td>85</td>
                  <td><span class="good">Ä°yi</span></td>
                </tr>
                <tr>
                  <td>8</td>
                  <td>Mustafa YILMAZ</td>
                  <td>93%</td>
                  <td>84</td>
                  <td><span class="good">Ä°yi</span></td>
                </tr>
                <tr>
                  <td>9</td>
                  <td>Zeynep KARA</td>
                  <td>92%</td>
                  <td>83</td>
                  <td><span class="good">Ä°yi</span></td>
                </tr>
                <tr>
                  <td>10</td>
                  <td>Emre DEMÄ°R</td>
                  <td>91%</td>
                  <td>82</td>
                  <td><span class="good">Ä°yi</span></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- Attention Required -->
      <div class="card">
        <div class="card-header">
          <h6 class="mb-0">DÄ°KKAT GEREKTÄ°REN Ã–ÄRENCÄ°LER</h6>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>Ad Soyad</th>
                  <th>KatÄ±lÄ±m</th>
                  <th>SÄ±nav</th>
                  <th>Sorun</th>
                  <th>Ä°ÅŸlem</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Can ÅAHIN</td>
                  <td>68%</td>
                  <td>58</td>
                  <td><span class="warning">DÃ¼ÅŸÃ¼k katÄ±lÄ±m</span></td>
                  <td><button class="btn btn-outline-primary btn-sm">ğŸ“ GÃ¶rÃ¼ÅŸme</button></td>
                </tr>
                <tr>
                  <td>Deniz KARA</td>
                  <td>72%</td>
                  <td>65</td>
                  <td><span class="warning">SÄ±nav baÅŸarÄ±sÄ±zlÄ±k</span></td>
                  <td><button class="btn btn-outline-primary btn-sm">ğŸ“ GÃ¶rÃ¼ÅŸme</button></td>
                </tr>
                <tr>
                  <td>Ece YILMAZ</td>
                  <td>75%</td>
                  <td>72</td>
                  <td><span class="warning">DÃ¼ÅŸÃ¼k performans</span></td>
                  <td><button class="btn btn-outline-primary btn-sm">ğŸ“ GÃ¶rÃ¼ÅŸme</button></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="alert alert-info mt-3">
            <strong>ğŸ’¡ Ã–neri:</strong> Bu Ã¶ÄŸrencilerle bireysel gÃ¶rÃ¼ÅŸme yapÄ±lmalÄ±
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Attendance Chart
    const attendanceCtx = document.getElementById('attendanceChart').getContext('2d');
    const attendanceChart = new Chart(attendanceCtx, {
      type: 'doughnut',
      data: {
        labels: ['%95-100', '%90-94', '%80-89', '%70-79', '%0-69'],
        datasets: [{
          data: [68, 45, 28, 12, 3],
          backgroundColor: [
            '#22c55e',
            '#84cc16',
            '#f59e0b',
            '#ef4444',
            '#dc2626'
          ],
          borderWidth: 2,
          borderColor: '#ffffff'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                const percentage = ((context.parsed / total) * 100).toFixed(1);
                return context.label + ': ' + context.parsed + ' Ã¶ÄŸrenci (' + percentage + '%)';
              }
            }
          }
        }
      }
    });

    // Exam Chart
    const examCtx = document.getElementById('examChart').getContext('2d');
    const examChart = new Chart(examCtx, {
      type: 'bar',
      data: {
        labels: ['90-100', '80-89', '75-79', '60-74', '0-59'],
        datasets: [{
          label: 'Ã–ÄŸrenci SayÄ±sÄ±',
          data: [42, 58, 35, 15, 6],
          backgroundColor: [
            '#22c55e',
            '#84cc16',
            '#f59e0b',
            '#ef4444',
            '#dc2626'
          ],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true
          }
        },
        plugins: {
          legend: {
            display: false
          }
        }
      }
    });

    // Form submission
    document.getElementById('reportFilters').addEventListener('submit', (e) => {
      e.preventDefault();
      const reportType = document.querySelector('input[name="reportType"]:checked').value;
      const startDate = document.getElementById('startDate').value;
      const endDate = document.getElementById('endDate').value;
      const education = document.getElementById('educationFilter').value;
      const performance = document.getElementById('performanceFilter').value;
      const status = document.getElementById('statusFilter').value;
      
      console.log('Generating participant report:', {
        reportType,
        startDate,
        endDate,
        education,
        performance,
        status
      });
      
      alert('KatÄ±lÄ±mcÄ± raporu oluÅŸturuluyor... (Demo)');
    });

    // Download buttons
    document.getElementById('downloadPdf').addEventListener('click', () => {
      alert('PDF raporu indiriliyor... (Demo)');
    });

    document.getElementById('downloadExcel').addEventListener('click', () => {
      // Mock CSV export
      const csvData = [
        ['#', 'Ad Soyad', 'KatÄ±lÄ±m', 'SÄ±nav', 'Genel'],
        ['1', 'Ahmet YILMAZ', '100%', '95', 'MÃ¼kemmel'],
        ['2', 'Zeynep YILDIZ', '100%', '93', 'MÃ¼kemmel'],
        ['3', 'AyÅŸe DEMÄ°R', '98%', '92', 'Ã‡ok Ä°yi'],
        ['4', 'Mehmet KAYA', '97%', '90', 'Ã‡ok Ä°yi'],
        ['5', 'Elif Ã–ZCAN', '99%', '89', 'Ã‡ok Ä°yi']
      ];
      
      const csv = csvData.map(row => row.join(';')).join('\n');
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'katilimci-raporu.csv';
      link.click();
    });

    // Meeting buttons
    document.querySelectorAll('.btn-outline-primary').forEach(btn => {
      btn.addEventListener('click', (e) => {
        if (e.target.textContent.includes('GÃ¶rÃ¼ÅŸme')) {
          alert('GÃ¶rÃ¼ÅŸme randevusu oluÅŸturuluyor... (Demo)');
        }
      });
    });

    // Initialize
    window.addEventListener('DOMContentLoaded', () => {
      // Set default dates
      const today = new Date();
      const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
      const lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);
      
      document.getElementById('startDate').value = firstDay.toISOString().split('T')[0];
      document.getElementById('endDate').value = lastDay.toISOString().split('T')[0];
    });
  </script>
</body>
</html>

