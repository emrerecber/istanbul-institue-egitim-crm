<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EÄŸitim CRM - EÄŸitim RaporlarÄ±</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#f8fafc; }
    .page-header { position: sticky; top: 0; background: #ffffffcc; backdrop-filter: saturate(180%) blur(6px); border-bottom: 1px solid #eef2f7; z-index: 10; }
    .card { border:1px solid #e5e7eb; box-shadow: 0 1px 2px rgba(16,24,40,.04); }
    .chart-container { height: 300px; position: relative; }
    .occupancy-bar { height: 20px; background: #e5e7eb; border-radius: 10px; overflow: hidden; }
    .occupancy-fill { height: 100%; transition: width 0.3s ease; }
    .occupancy-90 { background: #22c55e; }
    .occupancy-80 { background: #84cc16; }
    .occupancy-70 { background: #f59e0b; }
    .occupancy-50 { background: #ef4444; }
    .status-success { color: #22c55e; }
    .status-warning { color: #f59e0b; }
    .status-danger { color: #ef4444; }
  </style>
</head>
<body>
  <header class="page-header">
    <div class="container-fluid py-3 d-flex align-items-center justify-content-between">
      <div>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-1">
            <li class="breadcrumb-item"><a href="index.html" class="text-decoration-none">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="raporlar.html" class="text-decoration-none">Raporlar</a></li>
            <li class="breadcrumb-item active" aria-current="page">EÄŸitim RaporlarÄ±</li>
          </ol>
        </nav>
        <h1 class="h5 fw-semibold mb-0">EÄŸitim RaporlarÄ±</h1>
      </div>
    </div>
  </header>

  <main class="container-fluid py-3 py-md-4">
    <!-- Report Filters -->
    <div class="card mb-4">
      <div class="card-header">
        <h6 class="mb-0">EÄÄ°TÄ°M RAPOR FÄ°LTRELERÄ°</h6>
      </div>
      <div class="card-body">
        <form id="reportFilters" class="row g-3">
          <div class="col-12">
            <label class="form-label">Rapor Tipi:</label>
            <div class="d-flex gap-3 flex-wrap">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="occupancy" id="occupancy" checked>
                <label class="form-check-label" for="occupancy">EÄŸitim Doluluk</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="instructor" id="instructor">
                <label class="form-check-label" for="instructor">EÄŸitmen Performans</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="category" id="category">
                <label class="form-check-label" for="category">Kategori Analizi</label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="reportType" value="success" id="success">
                <label class="form-check-label" for="success">BaÅŸarÄ± OranlarÄ±</label>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-4">
            <label class="form-label">Tarih AralÄ±ÄŸÄ±:</label>
            <div class="row g-2">
              <div class="col-6">
                <input type="date" class="form-control" id="startDate" value="2025-09-01">
              </div>
              <div class="col-6">
                <input type="date" class="form-control" id="endDate" value="2025-09-30">
              </div>
            </div>
          </div>

          <div class="col-12 col-md-4">
            <label class="form-label">Kategori:</label>
            <select class="form-select" id="categoryFilter">
              <option value="">TÃ¼mÃ¼</option>
              <option value="EditÃ¶rlÃ¼k">EditÃ¶rlÃ¼k</option>
              <option value="YazÄ±lÄ±m">YazÄ±lÄ±m</option>
              <option value="YÃ¶netim">YÃ¶netim</option>
              <option value="Finans">Finans</option>
            </select>
          </div>

          <div class="col-12 col-md-4">
            <label class="form-label">EÄŸitmen:</label>
            <select class="form-select" id="instructorFilter">
              <option value="">TÃ¼mÃ¼</option>
              <option value="Ahmet YÄ±lmaz">Ahmet YÄ±lmaz</option>
              <option value="AyÅŸe Demir">AyÅŸe Demir</option>
              <option value="Mehmet Kaya">Mehmet Kaya</option>
            </select>
          </div>

          <div class="col-12 d-flex gap-2">
            <button type="submit" class="btn btn-primary">ğŸ” RAPOR OLUÅTUR</button>
            <button type="button" class="btn btn-outline-secondary" id="downloadPdf">ğŸ“„ PDF Ä°ndir</button>
            <button type="button" class="btn btn-outline-success" id="downloadExcel">ğŸ“¥ Excel Ä°ndir</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Report Results -->
    <div id="reportResults">
      <!-- General Statistics -->
      <div class="row g-3 mb-4">
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-primary mb-2">
                <i class="fa-solid fa-graduation-cap fa-2x"></i>
              </div>
              <div class="h4 mb-0">45</div>
              <div class="text-muted">Toplam EÄŸitim</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-success mb-2">
                <i class="fa-solid fa-play fa-2x"></i>
              </div>
              <div class="h4 mb-0">23</div>
              <div class="text-muted">Aktif EÄŸitim</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-info mb-2">
                <i class="fa-solid fa-percentage fa-2x"></i>
              </div>
              <div class="h4 mb-0">%87.3</div>
              <div class="text-muted">Ortalama Doluluk</div>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-3">
          <div class="card">
            <div class="card-body text-center">
              <div class="text-warning mb-2">
                <i class="fa-solid fa-exclamation-triangle fa-2x"></i>
              </div>
              <div class="h4 mb-0">3</div>
              <div class="text-muted">DÃ¼ÅŸÃ¼k Doluluk</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Occupancy Distribution -->
      <div class="card mb-4">
        <div class="card-header">
          <h6 class="mb-0">DOLULUK DAÄILIMI</h6>
        </div>
        <div class="card-body">
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <div class="d-flex align-items-center mb-2">
                <div class="occupancy-bar flex-grow-1 me-3">
                  <div class="occupancy-fill occupancy-90" style="width: 33%"></div>
                </div>
                <div class="text-nowrap">%90-100: 15 eÄŸitim (33%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="occupancy-bar flex-grow-1 me-3">
                  <div class="occupancy-fill occupancy-80" style="width: 27%"></div>
                </div>
                <div class="text-nowrap">%80-89: 12 eÄŸitim (27%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="occupancy-bar flex-grow-1 me-3">
                  <div class="occupancy-fill occupancy-70" style="width: 22%"></div>
                </div>
                <div class="text-nowrap">%70-79: 10 eÄŸitim (22%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="occupancy-bar flex-grow-1 me-3">
                  <div class="occupancy-fill occupancy-50" style="width: 11%"></div>
                </div>
                <div class="text-nowrap">%50-69: 5 eÄŸitim (11%)</div>
              </div>
              <div class="d-flex align-items-center mb-2">
                <div class="occupancy-bar flex-grow-1 me-3">
                  <div class="occupancy-fill occupancy-50" style="width: 7%"></div>
                </div>
                <div class="text-nowrap">%0-49: 3 eÄŸitim (7%)</div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="chart-container">
                <canvas id="occupancyChart"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Education Details Table -->
      <div class="card mb-4">
        <div class="card-header">
          <h6 class="mb-0">EÄÄ°TÄ°M BAZLI DETAY</h6>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>EÄŸitim AdÄ±</th>
                  <th>Kontenjan</th>
                  <th>KayÄ±tlÄ±</th>
                  <th>Doluluk</th>
                  <th>Durum</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>YTÃœ EditÃ¶rlÃ¼k</td>
                  <td>30</td>
                  <td>30</td>
                  <td>
                    <div class="occupancy-bar" style="width: 100px;">
                      <div class="occupancy-fill occupancy-90" style="width: 100%"></div>
                    </div>
                    <span class="ms-2">100%</span>
                  </td>
                  <td><span class="status-success">âœ…</span></td>
                </tr>
                <tr>
                  <td>CRM Sistemi</td>
                  <td>25</td>
                  <td>24</td>
                  <td>
                    <div class="occupancy-bar" style="width: 100px;">
                      <div class="occupancy-fill occupancy-90" style="width: 96%"></div>
                    </div>
                    <span class="ms-2">96%</span>
                  </td>
                  <td><span class="status-success">âœ…</span></td>
                </tr>
                <tr>
                  <td>Proje YÃ¶netimi</td>
                  <td>20</td>
                  <td>18</td>
                  <td>
                    <div class="occupancy-bar" style="width: 100px;">
                      <div class="occupancy-fill occupancy-80" style="width: 90%"></div>
                    </div>
                    <span class="ms-2">90%</span>
                  </td>
                  <td><span class="status-success">âœ…</span></td>
                </tr>
                <tr>
                  <td>Finans EÄŸitimi</td>
                  <td>15</td>
                  <td>11</td>
                  <td>
                    <div class="occupancy-bar" style="width: 100px;">
                      <div class="occupancy-fill occupancy-70" style="width: 73%"></div>
                    </div>
                    <span class="ms-2">73%</span>
                  </td>
                  <td><span class="status-warning">âš ï¸</span></td>
                </tr>
                <tr>
                  <td>Ä°nsan KaynaklarÄ±</td>
                  <td>20</td>
                  <td>8</td>
                  <td>
                    <div class="occupancy-bar" style="width: 100px;">
                      <div class="occupancy-fill occupancy-50" style="width: 40%"></div>
                    </div>
                    <span class="ms-2">40%</span>
                  </td>
                  <td><span class="status-danger">âŒ</span></td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="alert alert-warning mt-3">
            <strong>âš ï¸ DÄ°KKAT:</strong> 3 eÄŸitim %50 doluluk altÄ±nda
          </div>
        </div>
      </div>

      <!-- Category Analysis -->
      <div class="card">
        <div class="card-header">
          <h6 class="mb-0">KATEGORÄ° BAZLI ANALÄ°Z</h6>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="table-light">
                <tr>
                  <th>Kategori</th>
                  <th>EÄŸitim SayÄ±sÄ±</th>
                  <th>Ort. Doluluk</th>
                  <th>Gelir</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>EditÃ¶rlÃ¼k</td>
                  <td>12</td>
                  <td>%92</td>
                  <td>520Kâ‚º</td>
                </tr>
                <tr>
                  <td>YazÄ±lÄ±m</td>
                  <td>8</td>
                  <td>%88</td>
                  <td>385Kâ‚º</td>
                </tr>
                <tr>
                  <td>YÃ¶netim</td>
                  <td>15</td>
                  <td>%85</td>
                  <td>445Kâ‚º</td>
                </tr>
                <tr>
                  <td>Finans</td>
                  <td>6</td>
                  <td>%71</td>
                  <td>178Kâ‚º</td>
                </tr>
                <tr>
                  <td>DiÄŸer</td>
                  <td>4</td>
                  <td>%65</td>
                  <td>95Kâ‚º</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Chart.js implementation for occupancy distribution
    const ctx = document.getElementById('occupancyChart').getContext('2d');
    const occupancyChart = new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['%90-100', '%80-89', '%70-79', '%50-69', '%0-49'],
        datasets: [{
          data: [15, 12, 10, 5, 3],
          backgroundColor: [
            '#22c55e',
            '#84cc16',
            '#f59e0b',
            '#ef4444',
            '#dc2626'
          ],
          borderWidth: 2,
          borderColor: '#ffffff'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                const percentage = ((context.parsed / total) * 100).toFixed(1);
                return context.label + ': ' + context.parsed + ' eÄŸitim (' + percentage + '%)';
              }
            }
          }
        }
      }
    });

    // Form submission
    document.getElementById('reportFilters').addEventListener('submit', (e) => {
      e.preventDefault();
      const reportType = document.querySelector('input[name="reportType"]:checked').value;
      const startDate = document.getElementById('startDate').value;
      const endDate = document.getElementById('endDate').value;
      const category = document.getElementById('categoryFilter').value;
      const instructor = document.getElementById('instructorFilter').value;
      
      console.log('Generating education report:', {
        reportType,
        startDate,
        endDate,
        category,
        instructor
      });
      
      alert('EÄŸitim raporu oluÅŸturuluyor... (Demo)');
    });

    // Download buttons
    document.getElementById('downloadPdf').addEventListener('click', () => {
      alert('PDF raporu indiriliyor... (Demo)');
    });

    document.getElementById('downloadExcel').addEventListener('click', () => {
      // Mock CSV export
      const csvData = [
        ['EÄŸitim AdÄ±', 'Kontenjan', 'KayÄ±tlÄ±', 'Doluluk %', 'Durum'],
        ['YTÃœ EditÃ¶rlÃ¼k', '30', '30', '100%', 'âœ…'],
        ['CRM Sistemi', '25', '24', '96%', 'âœ…'],
        ['Proje YÃ¶netimi', '20', '18', '90%', 'âœ…'],
        ['Finans EÄŸitimi', '15', '11', '73%', 'âš ï¸'],
        ['Ä°nsan KaynaklarÄ±', '20', '8', '40%', 'âŒ']
      ];
      
      const csv = csvData.map(row => row.join(';')).join('\n');
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'egitim-raporu.csv';
      link.click();
    });

    // Initialize
    window.addEventListener('DOMContentLoaded', () => {
      // Set default dates
      const today = new Date();
      const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
      const lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);
      
      document.getElementById('startDate').value = firstDay.toISOString().split('T')[0];
      document.getElementById('endDate').value = lastDay.toISOString().split('T')[0];
    });
  </script>
</body>
</html>

