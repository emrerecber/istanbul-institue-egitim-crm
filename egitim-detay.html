<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Eğitim CRM - Eğitim Detay</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#f8fafc; }
    .page-header { position: sticky; top: 0; background: #ffffffcc; backdrop-filter: saturate(180%) blur(6px); border-bottom: 1px solid #eef2f7; z-index: 10; }
    .info-card { border:1px solid #e5e7eb; box-shadow: 0 1px 2px rgba(16,24,40,.04); }
    .badge-status { font-weight: 600; }
    .timeline { border-left: 2px solid #e5e7eb; padding-left: 1rem; }
    .timeline-item { position: relative; margin-bottom: 1rem; }
    .timeline-item::before { content: ""; position: absolute; left: -10px; top: .25rem; width: .75rem; height: .75rem; background: #2563eb; border-radius: 999px; }
  </style>
</head>
<body>
  <header class="page-header">
    <div class="container-fluid py-3 d-flex align-items-center justify-content-between">
      <div>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-1">
            <li class="breadcrumb-item"><a href="index.html" class="text-decoration-none">Dashboard</a></li>
            <li class="breadcrumb-item"><a href="egitim-listesi.html" class="text-decoration-none">Eğitim Listesi</a></li>
            <li class="breadcrumb-item active" aria-current="page">Eğitim Detay</li>
          </ol>
        </nav>
        <h1 class="h5 fw-semibold mb-0">Eğitim Detay</h1>
      </div>
      <div class="d-flex align-items-center gap-2">
        <a class="btn btn-outline-secondary" href="egitim-listesi.html"><i class="fa-solid fa-arrow-left me-2"></i> Geri</a>
      </div>
    </div>
  </header>

  <main class="container-fluid py-3 py-md-4">
    <!-- Summary Card -->
    <div class="card info-card mb-3">
      <div class="card-body d-flex flex-wrap gap-3 align-items-center justify-content-between">
        <div>
          <div class="h5 mb-1" id="eAd">-</div>
          <div class="text-muted small" id="eKod">Kod: -</div>
          <div class="text-muted small"><i class="fa-regular fa-folder-open me-1"></i> Kategori: <span id="eKategori">-</span></div>
          <div class="text-muted small"><i class="fa-solid fa-chalkboard-user me-1"></i> Eğitmen: <span id="eEgitmen">-</span></div>
          <div class="text-muted small"><i class="fa-regular fa-calendar me-1"></i> <span id="eTarih">-</span></div>
          <div class="text-muted small"><i class="fa-solid fa-user-group me-1"></i> <span id="eKayit">-</span></div>
          <div class="text-muted small"><i class="fa-solid fa-coins me-1"></i> <span id="eFiyat">-</span></div>
          <div class="text-muted small"><i class="fa-solid fa-location-dot me-1"></i> <span id="eLokasyon">-</span></div>
        </div>
        <div class="d-flex align-items-center gap-2">
          <span class="badge text-bg-success badge-status" id="eDurum">Aktif</span>
          <button class="btn btn-primary" id="btnEdit"><i class="fa-regular fa-pen-to-square me-2"></i> Düzenle</button>
          <a class="btn btn-outline-secondary" href="#"><i class="fa-solid fa-users me-2"></i> Katılımcılar</a>
          <a class="btn btn-outline-secondary" href="#"><i class="fa-solid fa-chart-column me-2"></i> Raporlar</a>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <ul class="nav nav-tabs" id="detailTabs" role="tablist">
      <li class="nav-item" role="presentation"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabGenel" type="button" role="tab">Genel Bilgiler</button></li>
      <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabTakvim" type="button" role="tab">Takvim</button></li>
      <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabKatilim" type="button" role="tab">Katılımcılar</button></li>
      <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabYoklama" type="button" role="tab">Yoklama</button></li>
      <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabSinav" type="button" role="tab">Sınavlar</button></li>
      <li class="nav-item" role="presentation"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabIstat" type="button" role="tab">İstatistikler</button></li>
    </ul>
    <div class="tab-content border border-top-0 rounded-bottom bg-white p-3">
      <div class="tab-pane fade show active" id="tabGenel" role="tabpanel">
        <div class="row g-3">
          <div class="col-12 col-xl-6">
            <div class="card info-card h-100">
              <div class="card-header bg-white fw-semibold">Genel</div>
              <div class="card-body" id="genel"></div>
            </div>
          </div>
          <div class="col-12 col-xl-6">
            <div class="card info-card h-100">
              <div class="card-header bg-white fw-semibold">Açıklama</div>
              <div class="card-body" id="aciklama"></div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane fade" id="tabTakvim" role="tabpanel">
        <ul class="list-group" id="takvimList"></ul>
      </div>
      <div class="tab-pane fade" id="tabKatilim" role="tabpanel">
        <div class="table-responsive">
          <table class="table table-hover align-middle">
            <thead class="table-light"><tr><th>#</th><th>Ad Soyad</th><th>TC No</th><th>Tip</th><th>Ödeme Durumu</th><th>Katılım %</th><th>İşlemler</th></tr></thead>
            <tbody id="katilimBody"></tbody>
          </table>
        </div>
      </div>
      <div class="tab-pane fade" id="tabYoklama" role="tabpanel">
        <div class="d-flex gap-2 align-items-center mb-2">
          <input type="date" class="form-control" style="max-width:220px" id="attDate">
          <button class="btn btn-primary" id="btnTakeAtt"><i class="fa-solid fa-clipboard-check me-1"></i> Toplu Yoklama</button>
        </div>
        <div id="attList" class="d-flex flex-column gap-2"></div>
      </div>
      <div class="tab-pane fade" id="tabSinav" role="tabpanel">
        <ul class="list-group" id="sinavList"></ul>
      </div>
      <div class="tab-pane fade" id="tabIstat" role="tabpanel">
        <div class="row g-3">
          <div class="col-12 col-xl-4"><div class="card info-card"><div class="card-body"><div class="text-muted small">Katılım Oranı</div><div class="h5" id="istatKatilim">-</div></div></div></div>
          <div class="col-12 col-xl-4"><div class="card info-card"><div class="card-body"><div class="text-muted small">Başarı Oranı</div><div class="h5" id="istatBasari">-</div></div></div></div>
          <div class="col-12 col-xl-4"><div class="card info-card"><div class="card-body"><div class="text-muted small">Ödeme Durumu</div><div class="h5" id="istatOdeme">-</div></div></div></div>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Dummy data
    const egitimler = [
      { id:1, kod:'YTU-2025-001', ad:'YTÜ Editörlük Programı', kategori:'Editörlük', baslangic:'2025-08-08', bitis:'2025-10-20', gunSayisi:45, kontenjan:30, kayitli:28, egitmen:'Ahmet Yılmaz', fiyatBireysel:15000, fiyatKurumsal:13500, durum:'Aktif', tip:'Online', platform:'Zoom', sertifika:true, sinavSayisi:2, aciklama:'Editörlük alanında kapsamlı bir program.' },
      { id:2, kod:'CRM-2025-005', ad:'CRM Sistemi Eğitimi', kategori:'Yazılım', baslangic:'2025-11-15', bitis:'2025-12-30', gunSayisi:30, kontenjan:25, kayitli:22, egitmen:'Ayşe Demir', fiyatBireysel:12000, fiyatKurumsal:10500, durum:'Planlanan', tip:'Hybrid', lokasyon:'İstanbul', sertifika:true, sinavSayisi:1, aciklama:'CRM sistemlerine giriş ve ileri seviye kullanımlar.' },
    ];
    const egitimGunleri = [
      { tarih: '2025-08-08', saat:'09:00-17:00', durum:'Tamamlandı', katilim:28 },
      { tarih: '2025-08-10', saat:'09:00-17:00', durum:'Tamamlandı', katilim:27 },
      { tarih: '2025-08-12', saat:'09:00-17:00', durum:'Bugün', katilim:0 },
    ];

    const params = new URLSearchParams(location.search); const id = Number(params.get('id'))||1;
    const e = egitimler.find(x=>x.id===id) || egitimler[0];

    const formatMoney = (v) => new Intl.NumberFormat('tr-TR',{style:'currency',currency:'TRY', maximumFractionDigits:0}).format(v);
    const formatDateTR = (iso) => new Date(iso).toLocaleDateString('tr-TR');
    const statusBadge = (s) => s==='Aktif'?'<span class="badge text-bg-success">Aktif</span>': s==='Planlanan'?'<span class="badge text-bg-warning">Planlanan</span>':'<span class="badge text-bg-danger">Tamamlandı</span>';

    function fillSummary(){
      document.getElementById('eAd').textContent = e.ad;
      document.getElementById('eKod').textContent = `Kod: ${e.kod}`;
      document.getElementById('eKategori').textContent = e.kategori;
      document.getElementById('eEgitmen').textContent = e.egitmen;
      document.getElementById('eTarih').textContent = `${formatDateTR(e.baslangic)} - ${formatDateTR(e.bitis)} (${e.gunSayisi} gün)`;
      document.getElementById('eKayit').textContent = `${e.kayitli}/${e.kontenjan} Kayıtlı`;
      document.getElementById('eFiyat').textContent = `${formatMoney(e.fiyatBireysel)} (Bireysel) | ${formatMoney(e.fiyatKurumsal)} (Kurumsal)`;
      document.getElementById('eLokasyon').textContent = e.tip==='Online' ? `Online - ${e.platform||'Zoom'}` : (e.tip==='Hybrid' ? 'Hybrid' : (e.lokasyon||'-'));
      document.getElementById('eDurum').outerHTML = statusBadge(e.durum);
    }

    function renderGenel(){
      document.getElementById('genel').innerHTML = `
        <dl class="row mb-0">
          <dt class="col-sm-4">Kod</dt><dd class="col-sm-8">${e.kod}</dd>
          <dt class="col-sm-4">Kategori</dt><dd class="col-sm-8">${e.kategori}</dd>
          <dt class="col-sm-4">Eğitmen</dt><dd class="col-sm-8">${e.egitmen}</dd>
          <dt class="col-sm-4">Süre</dt><dd class="col-sm-8">${e.gunSayisi} gün</dd>
          <dt class="col-sm-4">Kontenjan</dt><dd class="col-sm-8">${e.kontenjan}</dd>
          <dt class="col-sm-4">Kayıtlı</dt><dd class="col-sm-8">${e.kayitli}</dd>
          <dt class="col-sm-4">Sertifika</dt><dd class="col-sm-8">${e.sertifika?'Evet':'Hayır'}</dd>
          <dt class="col-sm-4">Sınav Sayısı</dt><dd class="col-sm-8">${e.sinavSayisi}</dd>
        </dl>`;
      document.getElementById('aciklama').textContent = e.aciklama || '-';
    }

    function renderTakvim(){
      const ul = document.getElementById('takvimList'); ul.innerHTML='';
      egitimGunleri.forEach((g,i)=>{
        const li = document.createElement('li'); li.className='list-group-item d-flex justify-content-between align-items-center';
        const tarih = new Date(g.tarih).toLocaleDateString('tr-TR', { day:'2-digit', month:'2-digit', year:'numeric', weekday:'long' });
        li.innerHTML = `<div><div class="fw-semibold">Gün ${i+1} - ${tarih}</div><div class="text-muted small"><i class=\"fa-regular fa-clock me-1\"></i> ${g.saat}</div></div><span class="badge ${g.durum==='Bugün'?'text-bg-info': 'text-bg-success'}">${g.durum}${g.katilim?` (${g.katilim}/${e.kayitli} katılım)`:''}</span>`;
        ul.appendChild(li);
      });
    }

    function renderKatilim(){
      const tbody = document.getElementById('katilimBody'); tbody.innerHTML='';
      const rows = [
        { id:1, ad:'Ahmet Yılmaz', tc:'113***', tip:'Bireysel', odeme:'Ödendi', katilim:95 },
        { id:2, ad:'Ayşe Demir', tc:'224***', tip:'Kurumsal', odeme:'Ödendi', katilim:88 },
      ];
      rows.forEach((r,i)=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${i+1}</td><td>${r.ad}</td><td>${r.tc}</td><td>${r.tip}</td><td>✅ ${r.odeme}</td><td>%${r.katilim}</td><td><div class="btn-group btn-group-sm"><a href="#" class="btn btn-outline-secondary" title="Görüntüle"><i class="fa-regular fa-eye"></i></a><button class="btn btn-outline-secondary" title="Email"><i class="fa-regular fa-envelope"></i></button><button class="btn btn-outline-secondary" title="SMS"><i class="fa-solid fa-mobile-screen"></i></button></div></td>`;
        tbody.appendChild(tr);
      });
    }

    function renderYoklama(){
      document.getElementById('attDate').value = e.baslangic;
      const list = document.getElementById('attList'); list.innerHTML='';
      ['Ahmet Yılmaz','Ayşe Demir','Mehmet Kaya','Elif Şahin'].forEach(n=>{
        const row = document.createElement('div'); row.className='border rounded p-2 d-flex justify-content-between align-items-center';
        row.innerHTML = `<span>${n}</span><div class="form-check form-switch"><input class="form-check-input" type="checkbox"></div>`;
        list.appendChild(row);
      });
      document.getElementById('btnTakeAtt').onclick = ()=>{ alert('Yoklama kaydedildi.'); };
    }

    function renderSinav(){
      const ul = document.getElementById('sinavList'); ul.innerHTML='';
      const arr = Array.from({length:e.sinavSayisi},(_,i)=>`Sınav ${i+1}`);
      arr.forEach(s=>{ const li=document.createElement('li'); li.className='list-group-item d-flex justify-content-between align-items-center'; li.innerHTML=`<span><i class="fa-regular fa-file-lines me-2"></i>${s}</span><span class="badge text-bg-secondary">Planlı</span>`; ul.appendChild(li); });
    }

    // Init
    window.addEventListener('DOMContentLoaded', ()=>{
      fillSummary(); renderGenel(); renderTakvim(); renderKatilim(); renderYoklama(); renderSinav();
    });
  </script>
</body>
</html>



