<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EÄŸitim CRM - Mali Detay</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; background:#f8fafc; }
    .page-header { position: sticky; top: 0; background: #ffffffcc; backdrop-filter: saturate(180%) blur(6px); border-bottom: 1px solid #eef2f7; z-index: 10; }
    .card { border:1px solid #e5e7eb; box-shadow: 0 1px 2px rgba(16,24,40,.04); }
  </style>
</head>
<body>
  <header class="page-header">
    <div class="container-fluid py-3 d-flex align-items-center justify-content-between">
      <div>
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb mb-1" id="bc">
            <li class="breadcrumb-item"><a href="index.html" class="text-decoration-none">Dashboard</a></li>
            <li class="breadcrumb-item">Mali Ä°ÅŸlemler</li>
            <li class="breadcrumb-item active" aria-current="page">Detay</li>
          </ol>
        </nav>
        <h1 class="h5 fw-semibold mb-0" id="title">Mali Detay</h1>
      </div>
      <div class="d-flex align-items-center gap-2">
        <a class="btn btn-outline-secondary" id="backBtn" href="mali-ozet.html"><i class="fa-solid fa-arrow-left me-2"></i> Geri</a>
      </div>
    </div>
  </header>

  <main class="container-fluid py-3 py-md-4">
    <div class="card mb-3">
      <div class="card-body">
        <div class="d-flex align-items-start justify-content-between flex-wrap gap-2">
          <div>
            <div class="h5 mb-1" id="dHeader">-</div>
            <div class="text-muted small" id="dMeta">-</div>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-primary"><i class="fa-regular fa-pen-to-square me-1"></i> DÃ¼zenle</button>
            <button class="btn btn-outline-secondary"><i class="fa-regular fa-file-lines me-1"></i> FaturayÄ± GÃ¶rÃ¼ntÃ¼le</button>
            <button class="btn btn-outline-danger"><i class="fa-regular fa-trash-can me-1"></i> Sil</button>
          </div>
        </div>
        <div class="row g-3 mt-1">
          <div class="col-12 col-xl-6">
            <div class="border rounded p-3">
              <div class="row mb-0" id="dFields"></div>
            </div>
          </div>
          <div class="col-12 col-xl-6">
            <div class="border rounded p-3">
              <div class="d-flex justify-content-between"><div>Tutar (KDV HariÃ§)</div><div class="fw-semibold" id="dTutar">-</div></div>
              <div class="d-flex justify-content-between"><div>KDV (<span id="dKdvOran">-</span>)</div><div class="fw-semibold" id="dKdv">-</div></div>
              <hr>
              <div class="d-flex justify-content-between h5"><div>TOPLAM</div><div id="dToplam">-</div></div>
            </div>
            <div class="border rounded p-3 mt-3">
              <div class="text-muted small">AÃ‡IKLAMA</div>
              <div id="dAciklama">-</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-3">
      <div class="col-12 col-xl-6">
        <div class="card"><div class="card-header bg-white fw-semibold">Notlar</div><div class="card-body"><ul class="list-group" id="notes"></ul></div></div>
      </div>
      <div class="col-12 col-xl-6">
        <div class="card"><div class="card-header bg-white fw-semibold">Ä°ÅŸlem GeÃ§miÅŸi</div><div class="card-body"><ul class="list-group" id="history"></ul></div></div>
      </div>
    </div>
  </main>

  <script>
    const gelirler = [ { id:1, evrakNo:'GEL-2025-0156', tarih:'2025-09-29', gelirTuru:'EÄŸitim Ãœcreti', kaynak:'Bireysel', kisiAdi:'Ahmet YILMAZ', egitimAdi:'YTÃœ EditÃ¶rlÃ¼k ProgramÄ±', tutar:15000, kdvOran:18, kdvTutar:2700, toplam:17700, odemeSekli:'Kredi KartÄ±', durum:'Ã–dendi', faturaNo:'FT-2025-0156', aciklama:'EÄŸitim programÄ± kayÄ±t Ã¼creti' }, ];
    const giderler = [ { id:1, evrakNo:'GID-2025-0089', tarih:'2025-09-29', kategori:'Kira', firmaAdi:'ABC Gayrimenkul', aciklama:'Ofis KirasÄ± EylÃ¼l', tutar:25000, kdvOran:18, kdvTutar:4500, toplam:29500, odemeSekli:'EFT', durum:'Ã–dendi', faturaNo:'F-2025-09-001' } ];
    const params = new URLSearchParams(location.search); const id = Number(params.get('id')); const type = params.get('type')||'gelir';
    const fmt = (v) => new Intl.NumberFormat('tr-TR',{ style:'currency', currency:'TRY', maximumFractionDigits:2 }).format(v);
    const fmtDate = (iso) => new Date(iso).toLocaleDateString('tr-TR');

    const data = type==='gider' ? giderler.find(x=>x.id===id) : gelirler.find(x=>x.id===id);

    function fill(){
      const isGelir = type!=='gider';
      document.getElementById('title').textContent = `${isGelir?'Gelir':'Gider'} DetayÄ±`;
      document.getElementById('dHeader').textContent = `${isGelir?'ðŸ’° GELÄ°R':'ðŸ’¸ GÄ°DER'} - ${data?.evrakNo||'-'}`;
      document.getElementById('dMeta').textContent = `ðŸ“… ${fmtDate(data?.tarih||new Date())} â€¢ ${isGelir?'ðŸ“‹ TÃ¼r: '+(data?.gelirTuru||'-'):'ðŸ“‚ Kategori: '+(data?.kategori||'-')} ${isGelir?('â€¢ ðŸ‘¤ '+(data?.kisiAdi||data?.firmaAdi||'-')):('â€¢ ðŸ¢ '+(data?.firmaAdi||'-'))}`;

      const fields = isGelir ? [
        ['Tarih', fmtDate(data.tarih)],
        ['TÃ¼r', data.gelirTuru],
        ['KiÅŸi/Firma', data.kisiAdi || data.firmaAdi || '-'],
        ['EÄŸitim', data.egitimAdi || '-'],
        ['Ã–deme', data.odemeSekli],
        ['Durum', data.durum],
        ['Fatura', data.faturaNo || '-']
      ] : [
        ['Tarih', fmtDate(data.tarih)],
        ['Kategori', data.kategori],
        ['Firma/KiÅŸi', data.firmaAdi || '-'],
        ['Ã–deme', data.odemeSekli],
        ['Durum', data.durum],
        ['Belge', data.faturaNo || '-']
      ];
      const df = document.getElementById('dFields'); df.innerHTML='';
      fields.forEach(([k,v])=>{ const row=document.createElement('div'); row.className='col-12 d-flex justify-content-between'; row.innerHTML=`<div class="text-muted">${k}</div><div class="fw-semibold">${v}</div>`; df.appendChild(row); });

      document.getElementById('dTutar').textContent = fmt(data.tutar);
      document.getElementById('dKdvOran').textContent = `%${data.kdvOran}`;
      document.getElementById('dKdv').textContent = fmt(data.kdvTutar);
      document.getElementById('dToplam').textContent = fmt(data.toplam);
      document.getElementById('dAciklama').textContent = data.aciklama || '-';

      const bc = document.getElementById('bc');
      const back = isGelir ? 'gelirler.html' : 'giderler.html';
      document.getElementById('backBtn').href = back;
      const li = document.createElement('li'); li.className='breadcrumb-item';
      li.innerHTML = `<a href="${back}" class="text-decoration-none">${isGelir?'Gelirler':'Giderler'}</a>`;
      bc.insertBefore(li, bc.children[2]);

      // Notes & History examples
      const notes = [ { t:'29.09.2025 14:50', n:'KayÄ±t kontrol edildi' } ];
      const history = isGelir ? [ '29.09.2025 14:45 - KayÄ±t oluÅŸturuldu', '29.09.2025 14:48 - Ã–deme onaylandÄ±' ] : [ '29.09.2025 11:05 - KayÄ±t oluÅŸturuldu', '29.09.2025 11:20 - Ã–deme yapÄ±ldÄ±' ];
      const nUl = document.getElementById('notes'); notes.forEach(x=>{ const li=document.createElement('li'); li.className='list-group-item'; li.textContent=`${x.t} - ${x.n}`; nUl.appendChild(li); });
      const hUl = document.getElementById('history'); history.forEach(x=>{ const li=document.createElement('li'); li.className='list-group-item'; li.textContent=x; hUl.appendChild(li); });
    }

    window.addEventListener('DOMContentLoaded', fill);
  </script>
</body>
</html>



